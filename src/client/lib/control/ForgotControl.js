/* ------------------------------------------------------------------------------------------------===== FORGOT WORFLOW =====0: EMAIL (prepopulate with signin.email)    isRegistered ?    - false: error    - true: continue1: PASSWORD (new)    sendEmail (forgotToken)3: TOKEN    - ko: error    - ok: setPassword => Dashboard!-------------------------------------------------------------------------------------------------*/// import _ from '@jmaguirrei/belt';const _ = window._jmaguirrei_belt;export const ForgotControl = store => {  const language = store.get('language');  const currentStep = store.get('forgot.currentStep');  const currentCheck = _.get({    0: store.check('email', store.get('signin.email')),    1: store.check('password', store.get('forgot.password')),    2: { result: store.get('forgot.tokenDigits').length === 6 },  }, currentStep, {});  const checkResult = _.get(currentCheck, 'result', false);  const alert = store.alerts.find(item => item.isVisible);  return {    state: {      currentStep,      leftEnabled: currentStep > 0,      rightEnabled: checkResult,      checkText: _.get(currentCheck, `message.${language}`, ''),      alertText: _.get(alert, `message.${language}`, ''),    },    actions: {      onClickLeft: () => {        // const currentStep = store.get('forgot.currentStep');        if (currentStep > 0) store.set({ 'forgot.currentStep': currentStep - 1 });      },      onClickRight: () => {        // const currentStep = store.get('forgot.currentStep');        if (currentStep === 0) store.call('forgotEmail');        if (currentStep === 1) store.call('forgotPassword');        if (currentStep === 2) store.call('forgotToken');      },    },  };};